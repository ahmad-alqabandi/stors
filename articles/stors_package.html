<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>stors package • stors</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="stors package">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">stors</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/Sampling_Built_in_distributions.html">Sampling from Built-in Distributions using stors</a></li>
    <li><a class="dropdown-item" href="../articles/Sampling_user_distributions.html">Sampling from User-Defined Distributions using stors</a></li>
    <li><a class="dropdown-item" href="../articles/stors_package.html">stors package</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>stors package</h1>
            
      

      <div class="d-none name"><code>stors_package.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The aim of the <code>stors</code> package is to generate samples from
uni- and multimodal distributions using the Rejection Sampling
technique. Stors stands out for its ability to leverage the system’s
capabilities to optimize the sampling process.</p>
<p>Stors maximizes the sampling speed from the proposal distribution by
constructing steps with uniform areas that cover the target distribution
from which sampling is needed. To address potential efficiency issues in
heavy and light-tailed distributions, we switch to Adaptive Rejection
Sampling (ARS) for the tails, specifically for the proposals created by
the user. Fortunately, since ARS is used only for the tails, it
eliminates the requirement for log concavity in most distributions,
allowing us to cover a wide range of distributions that have log-concave
tails such as normal multimodal distrebutions.</p>
<p>To use the <code>stors</code> package, we need to differentiate
between two phases. The first phase involves building the proposal for
the proposal distribution. The second step is caching this proposal in
memory for sampling. This ensures optimum speed performance, as the
proposal data is constructed independently from the sampling process.
Most R base sampling functions are already covered in the stors package,
making sampling straightforward.</p>
</div>
<div class="section level2">
<h2 id="sampling-from-built-in-distrubutions">Sampling from Built-in Distrubutions<a class="anchor" aria-label="anchor" href="#sampling-from-built-in-distrubutions"></a>
</h2>
<p>To sample from any built-in distribution, a proposal for each
distribution is pre-optimized using 4091 steps when the package is
loaded for the first time. This optimization process constructs the
proposal and stores it in the internal R data directory. The proposal is
then cached in memory for efficient sampling whenever needed.</p>
<p>You can also visualize the proposal data using the function to better
understand its structure.</p>
<p>Here’s an example of optimizing a proposal for the Normal
distribution (note: this process is performed automatically when the
package is installed and loaded for the first time):</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ahmad-alqabandi.github.io/stors/">stors</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Optimize a proposal for the Normal distribution with 4091 steps</span></span>
<span><span class="va">proposal</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/srnorm_optimize.html">srnorm_optimize</a></span><span class="op">(</span>steps <span class="op">=</span> <span class="fl">4091</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Visualize the optimized proposal</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">proposal</span><span class="op">)</span></span></code></pre></div>
<p><img src="stors_package_files/figure-html/setup-1.png" width="700"></p>
<p>With the optimized proposal ready, sampling from a Normal
distribution with specific and is straightforward using the
function.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Generating 10 samples from the standard Normal distribution</span></span>
<span><span class="va">standard_normal_samples</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/srnorm.html">srnorm</a></span><span class="op">(</span><span class="fl">10</span>, mean <span class="op">=</span> <span class="fl">2</span>, sd <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">standard_normal_samples</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1]  0.5969126  2.9729916  2.2556419  0.9922990 -0.4526005  1.9155297</span></span>
<span><span class="co">#&gt;  [7]  1.9944033  1.4451368  2.6224192  2.7482640</span></span></code></pre></div>
<p>On the other hand, users can optimize a proposal for a specific
Normal distribution by calling and passing the desired and arguments. In
this case, a unique proposal will be optimized and cached in memory. To
sample from this custom proposal, the user can use the function by
simply specifying the sample size.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Optimize a custom proposal for N(3, 2)</span></span>
<span><span class="va">proposal</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/srnorm_optimize.html">srnorm_optimize</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="fl">3</span>, sd <span class="op">=</span> <span class="fl">2</span>, steps <span class="op">=</span> <span class="fl">2000</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Generate a sample of size 10^3 from N(3, 2)</span></span>
<span><span class="va">sample</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/srnorm.html">srnorm_custom</a></span><span class="op">(</span><span class="fl">10</span><span class="op">^</span><span class="fl">3</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Visualize the generated sample</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/hist.html" class="external-link">hist</a></span><span class="op">(</span><span class="va">sample</span>, main <span class="op">=</span> <span class="st">"Histogram of Samples from N(3, 2)"</span>, xlab <span class="op">=</span> <span class="st">"Value"</span>, col <span class="op">=</span> <span class="st">"skyblue"</span>, border <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span></span></code></pre></div>
<p><img src="stors_package_files/figure-html/unnamed-chunk-3-1.png" width="700"></p>
<p>To sample from a truncated Normal distribution, users need to
optimize either the scalable proposal or a custom proposal and specify
the truncation bounds using the (lower bound) and (upper bound)
arguments.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Define the truncation bounds</span></span>
<span><span class="va">lower_bound</span> <span class="op">&lt;-</span> <span class="op">-</span><span class="fl">1</span></span>
<span><span class="va">upper_bound</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span></span>
<span><span class="co"># Optimize the scalable proposal with truncation bounds</span></span>
<span><span class="va">proposal</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/srnorm_optimize.html">srnorm_optimize</a></span><span class="op">(</span>xl <span class="op">=</span> <span class="va">lower_bound</span>, xr <span class="op">=</span> <span class="va">upper_bound</span>, steps <span class="op">=</span> <span class="fl">4091</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Generate samples from the truncated standard Normal distribution</span></span>
<span><span class="va">sample</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/srnorm.html">srnorm</a></span><span class="op">(</span><span class="fl">10</span><span class="op">^</span><span class="fl">3</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/hist.html" class="external-link">hist</a></span><span class="op">(</span><span class="va">sample</span>, main <span class="op">=</span> <span class="st">"Truncated Standard Normal (-1, 1)"</span>, xlab <span class="op">=</span> <span class="st">"Value"</span>, col <span class="op">=</span> <span class="st">"lightblue"</span>, border <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span></span></code></pre></div>
<p><img src="stors_package_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Generate samples from the truncated Normal distribution N(2, 1)</span></span>
<span><span class="va">sample</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/srnorm.html">srnorm</a></span><span class="op">(</span><span class="fl">10</span><span class="op">^</span><span class="fl">3</span>, mean <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/hist.html" class="external-link">hist</a></span><span class="op">(</span><span class="va">sample</span>, main <span class="op">=</span> <span class="st">"Truncated Normal N(2, 1) (-1, 1)"</span>, xlab <span class="op">=</span> <span class="st">"Value"</span>, col <span class="op">=</span> <span class="st">"lightgreen"</span>, border <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span></span></code></pre></div>
<p><img src="stors_package_files/figure-html/unnamed-chunk-4-2.png" width="700"></p>
<p>The same process can be applied to a custom proposal. A custom
proposal can be truncated and used for sampling by following this
example:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Define the truncation bounds</span></span>
<span><span class="va">lower_bound</span> <span class="op">&lt;-</span> <span class="fl">2</span></span>
<span><span class="va">upper_bound</span> <span class="op">&lt;-</span> <span class="fl">6</span></span>
<span></span>
<span><span class="co"># Optimize a custom proposal with truncation bounds and mean = 4</span></span>
<span><span class="va">proposal</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/srnorm_optimize.html">srnorm_optimize</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="fl">4</span>, xl <span class="op">=</span> <span class="va">lower_bound</span>, xr <span class="op">=</span> <span class="va">upper_bound</span>, steps <span class="op">=</span> <span class="fl">4091</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Generate samples from the truncated Normal distribution</span></span>
<span><span class="va">sample</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/srnorm.html">srnorm_custom</a></span><span class="op">(</span><span class="fl">10</span><span class="op">^</span><span class="fl">3</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/hist.html" class="external-link">hist</a></span><span class="op">(</span><span class="va">sample</span>, main <span class="op">=</span> <span class="st">"Truncated Custom Normal (2, 6)"</span>, xlab <span class="op">=</span> <span class="st">"Value"</span>, col <span class="op">=</span> <span class="st">"lightblue"</span>, border <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span></span></code></pre></div>
<p><img src="stors_package_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
<p>The functions not only optimize the proposal but also return a
detailed list describing the properties of the optimized proposal. This
list provides insights into the proposal’s structure and
characteristics. You can use the base function to view these details or
the function to visualize the proposal.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Optimize a proposal for the Laplace distribution</span></span>
<span><span class="va">proposal</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/srlaplace_optimize.html">srlaplace_optimize</a></span><span class="op">(</span>steps <span class="op">=</span> <span class="fl">4091</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View the details of the optimized proposal</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">proposal</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Proposal Summary</span> <span style="color: #00BBBB;">────────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; • Total steps: 4,091</span></span>
<span><span class="co">#&gt; • Steps range: [-6.611093, 6.335299]</span></span>
<span><span class="co">#&gt; • Sampling efficiency: 99.84%</span></span>
<span></span>
<span><span class="co"># Visualize the proposal</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">proposal</span><span class="op">)</span></span></code></pre></div>
<p><img src="stors_package_files/figure-html/unnamed-chunk-6-1.png" width="700"></p>
<p>In cases where the proposal is dense and difficult to visualize in
its entirety, you can focus on a specific region by using the function
with the and parameters. These parameters allow you to set limits on the
x-axis, making it easier to zoom in on areas of interest within the
proposal.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Optimize a proposal for the Normal distribution</span></span>
<span><span class="va">proposal</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/srlaplace_optimize.html">srlaplace_optimize</a></span><span class="op">(</span>steps <span class="op">=</span> <span class="fl">1020</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Visualize the entire proposal</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">proposal</span>, main <span class="op">=</span> <span class="st">"Full Proposal Visualization"</span><span class="op">)</span></span></code></pre></div>
<p><img src="stors_package_files/figure-html/unnamed-chunk-7-1.png" width="700"></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Focus on a specific region of the proposal (e.g., x-axis range -2 to 2)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">proposal</span>, x_min <span class="op">=</span> <span class="op">-</span><span class="fl">1</span>, x_max <span class="op">=</span> <span class="fl">1</span>, main <span class="op">=</span> <span class="st">"Zoomed-In Proposal (-1, 1)"</span><span class="op">)</span></span></code></pre></div>
<p><img src="stors_package_files/figure-html/unnamed-chunk-7-2.png" width="700"></p>
<p>These functionalists of the proposal_optimizers and the subsequent
visualization tools provide users with in-depth insights into the
characteristics of the generated proposal, enabling them to understand
and fine-tune the sampling process.</p>
<p>If the user is not satisfied with the automatically optimized
proposal, the proposal_optimizers functions offers several arguments for
customization. One such argument is <code>target_sample_size</code>,
which defaults to 1000. If the user wishes to optimize the proposal for
significantly larger or smaller sample sizes, this argument can be
altered.</p>
<p>Another important argument is the pre-acceptance threshold
<code>theta</code>, which essentially is the ratio between the lower and
upper linear bounds for each step. This is typically set to a very small
number close to zero. The reason is that the cost of rejecting samples,
even in heavy-tailed distributions, is usually less than the cost of
using alternative exact sampling methods (like Inverse Transform) for
dense proposals, as the probability of hitting these inefficient steps
is low. However, for very large sample sizes (e.g., 10^9), these
inefficient steps might be hit more frequently, leading to an increase
in sampling time due to lower efficiency. In such cases, the user can
set a higher pre-acceptance threshold using the <code>theta</code>
parameter.</p>
<p>For users who are less familiar with the target distribution, or want
to focus on a specific range of the distribution, the
<code>proposal_range</code> argument can be used. This parameter limits
the step construction to a specified range on the x-axis, offering more
control over the proposal structure.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Customizing the proposal for a specific sample size</span></span>
<span><span class="va">custom_proposal</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/srnorm_optimize.html">srnorm_optimize</a></span><span class="op">(</span>target_sample_size <span class="op">=</span> <span class="fl">10000</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">custom_proposal</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Proposal Summary</span> <span style="color: #00BBBB;">────────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; • Total steps: 132</span></span>
<span><span class="co">#&gt; • Steps range: [-2.735325, 2.735325]</span></span>
<span><span class="co">#&gt; • Sampling efficiency: 97.42%</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">custom_proposal</span><span class="op">)</span></span></code></pre></div>
<p><img src="stors_package_files/figure-html/unnamed-chunk-8-1.png" width="700"></p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Customizing the proposal with a specific pre-acceptance threshold</span></span>
<span><span class="va">custom_proposal_high_theta</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/srnorm_optimize.html">srnorm_optimize</a></span><span class="op">(</span>theta <span class="op">=</span> <span class="fl">0.9</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">custom_proposal_high_theta</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Proposal Summary</span> <span style="color: #00BBBB;">────────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; • Total steps: 1,934</span></span>
<span><span class="co">#&gt; • Steps range: [-2.659710, 2.659710]</span></span>
<span><span class="co">#&gt; • Sampling efficiency: 99.73%</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">custom_proposal_high_theta</span><span class="op">)</span></span></code></pre></div>
<p><img src="stors_package_files/figure-html/unnamed-chunk-8-2.png" width="700"></p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Customizing the proposal within a specific range</span></span>
<span><span class="va">custom_proposal_range</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/srnorm_optimize.html">srnorm_optimize</a></span><span class="op">(</span>proposal_range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">custom_proposal_range</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Proposal Summary</span> <span style="color: #00BBBB;">────────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; • Total steps: 82</span></span>
<span><span class="co">#&gt; • Steps range: [-1.026970, 1.026970]</span></span>
<span><span class="co">#&gt; • Sampling efficiency: 86.32%</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">custom_proposal_range</span><span class="op">)</span></span></code></pre></div>
<p><img src="stors_package_files/figure-html/unnamed-chunk-8-3.png" width="700"></p>
<p>In addition to the <code>target_sample_size</code>,
<code>theta</code>, and <code>proposal_range</code> parameters, users
have the flexibility to directly control the number of steps in the
proposal. This can be particularly useful when users have specific
requirements or preferences for the granularity of the proposal. To
specify the number of steps, the <code>steps</code> argument can be
passed to the proposal_optimizer function.</p>
<p>By setting the <code>steps</code> parameter, users can determine the
resolution of the proposal, which can impact the balance between
computational efficiency and the granularity of the sampling. A higher
number of steps typically provides a more detailed proposal, potentially
leading to more precise sampling, but at the cost of increased memory
usage and possibly longer computation times.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Customizing the proposal with a specific number of steps</span></span>
<span><span class="va">custom_proposal_steps</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/srnorm_optimize.html">srnorm_optimize</a></span><span class="op">(</span>steps <span class="op">=</span> <span class="fl">50</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">custom_proposal_steps</span><span class="op">)</span></span></code></pre></div>
<p><img src="stors_package_files/figure-html/unnamed-chunk-9-1.png" width="700"></p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">custom_proposal_steps</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/srnorm_optimize.html">srnorm_optimize</a></span><span class="op">(</span>steps <span class="op">=</span> <span class="fl">500</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">custom_proposal_steps</span><span class="op">)</span></span></code></pre></div>
<p><img src="stors_package_files/figure-html/unnamed-chunk-9-2.png" width="700"></p>
<p>The user can also create a symmetric proposal for built-in
distributions by setting the argument to the value around which the
target density is symmetric.</p>
<p>Example: Creating a Symmetric Proposal for the Standard Normal
Distribution</p>
<p>In this example, we create a symmetric proposal for the standard
Normal distribution. Before doing so, we first delete all previously
constructed non-symmetric proposals (both scaled and custom) using the
function.</p>
<pre><code><span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Proposal number <span style="color: #0000BB;">1</span> deleted</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Proposal number <span style="color: #0000BB;">2</span> deleted</span></span>
<span><span class="co">#&gt; `geom_line()`: Each group consists of only one observation.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Do you need to adjust the <span style="color: #00BB00;">group</span> aesthetic?</span></span></code></pre>
<p><img src="stors_package_files/figure-html/unnamed-chunk-10-1.png" width="700"></p>
<p>Sampling from Truncated Distributions One of the standout features of
STORS is its ability to sample efficiently from truncated distributions.
To sample from a truncated distribution, the user simply needs to
specify the upper and lower truncation bounds using the (lower bound)
and (upper bound) arguments in the function.</p>
<p>Example: Sampling from a Truncated Standard Normal Distribution In
this example, we demonstrate how to sample from a truncated standard
Normal distribution with truncation bounds at and .</p>
<pre><code><span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Proposal number <span style="color: #0000BB;">1</span> deleted</span></span>
<span><span class="co">#&gt; `geom_line()`: Each group consists of only one observation.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Do you need to adjust the <span style="color: #00BB00;">group</span> aesthetic?</span></span>
<span><span class="co">#&gt; `geom_line()`: Each group consists of only one observation.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Do you need to adjust the <span style="color: #00BB00;">group</span> aesthetic?</span></span></code></pre>
<p><img src="stors_package_files/figure-html/unnamed-chunk-11-1.png" width="700"><img src="stors_package_files/figure-html/unnamed-chunk-11-2.png" width="700"></p>
<p>There are many built-in functions in stors, the list below shows all
available functions that can be used directly by the user after
optimizing the proposals:</p>
<pre><code><span><span class="co">#&gt; • `srnorm_custom()`</span></span>
<span><span class="co">#&gt; • `srlaplace_custom()`</span></span>
<span><span class="co">#&gt; • `srexp_custom()`</span></span>
<span><span class="co">#&gt; • `srchisq_custom()`</span></span>
<span><span class="co">#&gt; • `srgamma_custom()`</span></span>
<span><span class="co">#&gt; • `srbeta_custom()`</span></span>
<span><span class="co">#&gt; • `srpareto_custom()`</span></span></code></pre>
<p>For each built-in distribution, there is a corresponding proposal
distribution optimizer that can be invoked using the format . This
function optimizes the proposal for the specified distribution, enabling
efficient sampling.</p>
</div>
<div class="section level2">
<h2 id="sampling-from-users-distributions">Sampling from Users’ Distributions<a class="anchor" aria-label="anchor" href="#sampling-from-users-distributions"></a>
</h2>
<p>For distributions not covered by the built-in functions and that
satisfy the log concavity condition, users have the flexibility to
create their own proposals using the <code><a href="../reference/build_proposal.html">build_proposal()</a></code>
function. This function is designed to handle a variety of distributions
by accepting a range of parameters tailored to the specific needs of the
distribution being sampled from.</p>
<p>The following example demonstrates the process of sampling from a
bimodal normal distribution. Let’s assume that the user wants to sample
from a bimodal distribution, which is a combination of two normal
distributions
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>x</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><mn>0.5</mn><msub><mi>w</mi><mn>1</mn></msub><mrow><mo stretchy="true" form="prefix">(</mo><mi>x</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>+</mo><mn>0.5</mn><msub><mi>w</mi><mn>2</mn></msub><mrow><mo stretchy="true" form="prefix">(</mo><mi>x</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">f(x) = 0.5 w_1(x) + 0.5 w_2(x)</annotation></semantics></math>,
where
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>w</mi><mn>1</mn></msub><mrow><mo stretchy="true" form="prefix">(</mo><mi>x</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>∼</mo><mi>N</mi><mrow><mo stretchy="true" form="prefix">(</mo><mn>0</mn><mo>,</mo><mn>1</mn><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">w_1(x) \sim N(0, 1)</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>w</mi><mn>2</mn></msub><mrow><mo stretchy="true" form="prefix">(</mo><mi>x</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>∼</mo><mi>N</mi><mrow><mo stretchy="true" form="prefix">(</mo><mn>4</mn><mo>,</mo><mn>1</mn><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">w_2(x) \sim N(4, 1)</annotation></semantics></math>:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>x</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><mn>0.5</mn><mfrac><mn>1</mn><msqrt><mrow><mn>2</mn><mi>π</mi></mrow></msqrt></mfrac><mo>exp</mo><mrow><mo stretchy="true" form="prefix">(</mo><mo>−</mo><mfrac><msup><mi>x</mi><mn>2</mn></msup><mn>2</mn></mfrac><mo stretchy="true" form="postfix">)</mo></mrow><mo>+</mo><mn>0.5</mn><mfrac><mn>1</mn><msqrt><mrow><mn>2</mn><mi>π</mi></mrow></msqrt></mfrac><mo>exp</mo><mrow><mo stretchy="true" form="prefix">(</mo><mo>−</mo><mfrac><msup><mrow><mo stretchy="true" form="prefix">(</mo><mi>x</mi><mo>−</mo><mn>4</mn><mo stretchy="true" form="postfix">)</mo></mrow><mn>2</mn></msup><mn>2</mn></mfrac><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">
f(x) =  0.5 \frac{1}{\sqrt{2 \pi}}  \exp\left(-\frac{x^2}{2}\right) + 0.5  \frac{1}{\sqrt{2 \pi}} \exp\left(-\frac{(x - 4)^2}{2}\right)
</annotation></semantics></math></p>
<p>To sample from the tails of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>x</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">f(x)</annotation></semantics></math>
using ARS, we need the log transformation of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>x</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">f(x)</annotation></semantics></math>,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>x</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><mi>l</mi><mi>o</mi><mi>g</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>f</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>x</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">h(x) = log(f(x))</annotation></semantics></math>,
and its first derivative
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>h</mi><mtext mathvariant="normal">prime</mtext></msub><mrow><mo stretchy="true" form="prefix">(</mo><mi>x</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><mfrac><mi>d</mi><mrow><mi>d</mi><mi>x</mi></mrow></mfrac><mi>h</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>x</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">h_\text{prime}(x) = \frac{d}{dx} h(x)</annotation></semantics></math>.
Also, the modes of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>x</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">f(x)</annotation></semantics></math>
are required to build the steps part of the proposal distribution, which
in this case are 0.00134865 and 3.99865.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">modes_bi</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.00134865</span>, <span class="fl">3.99865</span><span class="op">)</span></span>
<span></span>
<span><span class="va">f_bi</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fl">0.5</span> <span class="op">*</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt</a></span><span class="op">(</span><span class="fl">2</span> <span class="op">*</span> <span class="va">pi</span><span class="op">)</span><span class="op">)</span><span class="op">^</span><span class="op">(</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="op">-</span><span class="op">(</span><span class="va">x</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span> <span class="op">/</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span> <span class="fl">0.5</span> <span class="op">*</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt</a></span><span class="op">(</span><span class="fl">2</span> <span class="op">*</span> <span class="va">pi</span><span class="op">)</span><span class="op">)</span><span class="op">^</span><span class="op">(</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="op">-</span><span class="op">(</span><span class="op">(</span><span class="va">x</span> <span class="op">-</span> <span class="fl">4</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span> <span class="op">/</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">h_bi</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="fu">f_bi</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">h_prime_bi</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="op">(</span><span class="op">-</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span> <span class="op">/</span> <span class="fl">2</span> <span class="op">*</span> <span class="op">(</span><span class="op">-</span><span class="fl">4</span> <span class="op">+</span> <span class="va">x</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span> <span class="op">*</span> <span class="fl">0.5</span> <span class="op">*</span> <span class="op">(</span><span class="op">-</span><span class="fl">4</span> <span class="op">+</span> <span class="va">x</span><span class="op">)</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt</a></span><span class="op">(</span><span class="fl">2</span> <span class="op">*</span> <span class="va">pi</span><span class="op">)</span> <span class="op">-</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="op">-</span><span class="va">x</span><span class="op">^</span><span class="fl">2</span> <span class="op">/</span> <span class="fl">2</span><span class="op">)</span> <span class="op">*</span> <span class="fl">0.5</span> <span class="op">*</span> <span class="va">x</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt</a></span><span class="op">(</span><span class="fl">2</span> <span class="op">*</span>  <span class="va">pi</span><span class="op">)</span><span class="op">)</span> <span class="op">/</span> <span class="op">(</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="op">-</span><span class="va">x</span><span class="op">^</span><span class="fl">2</span> <span class="op">/</span> <span class="fl">2</span><span class="op">)</span> <span class="op">*</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt</a></span><span class="op">(</span><span class="fl">2</span> <span class="op">*</span> <span class="va">pi</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span> <span class="op">/</span> <span class="fl">2</span> <span class="op">*</span> <span class="op">(</span><span class="op">-</span><span class="fl">4</span> <span class="op">+</span> <span class="va">x</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span> <span class="op">*</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt</a></span><span class="op">(</span><span class="fl">2</span> <span class="op">*</span> <span class="va">pi</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">bi_proposal</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/build_proposal.html">build_proposal</a></span><span class="op">(</span>lower <span class="op">=</span> <span class="op">-</span><span class="cn">Inf</span>, upper <span class="op">=</span> <span class="cn">Inf</span>, modes <span class="op">=</span> <span class="va">modes_bi</span>, f <span class="op">=</span> <span class="va">f_bi</span>, h <span class="op">=</span> <span class="va">h_bi</span>, h_prime <span class="op">=</span> <span class="va">h_prime_bi</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">bi_proposal</span><span class="op">)</span></span></code></pre></div>
<p><img src="stors_package_files/figure-html/unnamed-chunk-13-1.png" width="700"></p>
<p>After building the desired proposal with
<code><a href="../reference/build_proposal.html">build_proposal()</a></code>, users can explore its properties using
the <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> function and visualize its structure using the
<code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> function. This step is similar to what was done
previously with the built-in proposal and helps in understanding the
proposal’s configuration and ensuring that it aligns with the
requirements of the target distribution.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Printing the properties of the custom proposal</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">bi_proposal</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Proposal Summary</span> <span style="color: #00BBBB;">────────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; • Total steps: 4,099</span></span>
<span><span class="co">#&gt; • Steps range: [-3.817446, 7.816738]</span></span>
<span><span class="co">#&gt; • Sampling efficiency: 99.80%</span></span>
<span></span>
<span><span class="co"># Visualizing the custom proposal</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">bi_proposal</span><span class="op">)</span></span></code></pre></div>
<p><img src="stors_package_files/figure-html/unnamed-chunk-14-1.png" width="700"></p>
<p>Once the proposal is configured and validated, it can be passed to
the <code><a href="../reference/build_sampler.html">build_sampler()</a></code> function. <code><a href="../reference/build_sampler.html">build_sampler()</a></code>
caches the proposal in memory, providing fast access for sampling, and
returns a sampler function for the target distribution. This sampler
function can then be used to generate samples as needed.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Creating a sampler function using the custom proposal</span></span>
<span><span class="va">bi_sampler</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/build_sampler.html">build_sampler</a></span><span class="op">(</span><span class="va">bi_proposal</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">bi_proposal</span><span class="op">)</span></span></code></pre></div>
<p><img src="stors_package_files/figure-html/unnamed-chunk-15-1.png" width="700"></p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Generating samples from the target distribution</span></span>
<span><span class="va">sample</span> <span class="op">&lt;-</span> <span class="fu">bi_sampler</span><span class="op">(</span><span class="fl">10</span><span class="op">^</span><span class="fl">3</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/hist.html" class="external-link">hist</a></span><span class="op">(</span><span class="va">sample</span>, main <span class="op">=</span> <span class="st">"Sample Generated From Multi-modal Distribution "</span>, xlab <span class="op">=</span> <span class="st">"Value"</span>, col <span class="op">=</span> <span class="st">"lightblue"</span>, border <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span></span></code></pre></div>
<p><img src="stors_package_files/figure-html/unnamed-chunk-15-2.png" width="700"></p>
<p>Sampling from a Truncated User-Defined Distribution To sample from a
truncated user-defined distribution, simply provide the lower and upper
truncation bounds using the (lower bound) and (upper bound) arguments.
Below, we demonstrate this process using a previously created
multi-modal distribution.</p>
<p>Example: Sampling from a Truncated Multi-Modal Distribution</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Define modes for the multi-modal distribution</span></span>
<span><span class="va">modes_bi</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.00134865</span>, <span class="fl">3.99865</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Build a truncated proposal for the multi-modal distribution</span></span>
<span><span class="va">bi_trunc_proposal</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/build_proposal.html">build_proposal</a></span><span class="op">(</span></span>
<span>  lower <span class="op">=</span> <span class="op">-</span><span class="fl">1</span>,</span>
<span>  upper <span class="op">=</span> <span class="fl">6</span>,</span>
<span>  modes <span class="op">=</span> <span class="va">modes_bi</span>,</span>
<span>  f <span class="op">=</span> <span class="va">f_bi</span>,</span>
<span>  h <span class="op">=</span> <span class="va">h_bi</span>,</span>
<span>  h_prime <span class="op">=</span> <span class="va">h_prime_bi</span>,</span>
<span>  steps <span class="op">=</span> <span class="fl">2040</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Visualize the truncated proposal</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">bi_trunc_proposal</span>, main <span class="op">=</span> <span class="st">"Truncated Multi-Modal Proposal (-1, 6)"</span>, xlab <span class="op">=</span> <span class="st">"Value"</span>, col <span class="op">=</span> <span class="st">"skyblue"</span><span class="op">)</span></span>
<span><span class="co">#&gt; `geom_line()`: Each group consists of only one observation.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Do you need to adjust the <span style="color: #00BB00;">group</span> aesthetic?</span></span></code></pre></div>
<p><img src="stors_package_files/figure-html/unnamed-chunk-16-1.png" width="700"></p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># Create a sampler for the truncated distribution</span></span>
<span><span class="va">bi_sampler_trunc_sampler</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/build_sampler.html">build_sampler</a></span><span class="op">(</span><span class="va">bi_trunc_proposal</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Generate 10^3 samples from the truncated distribution</span></span>
<span><span class="va">sample</span> <span class="op">&lt;-</span> <span class="fu">bi_sampler_trunc_sampler</span><span class="op">(</span><span class="fl">10</span><span class="op">^</span><span class="fl">3</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Generate 10^3 samples from the truncated distribution</span></span>
<span><span class="va">sample</span> <span class="op">&lt;-</span> <span class="fu">bi_sampler_trunc_sampler</span><span class="op">(</span><span class="fl">10</span><span class="op">^</span><span class="fl">3</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Visualize the generated samples</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/hist.html" class="external-link">hist</a></span><span class="op">(</span></span>
<span>  <span class="va">sample</span>,</span>
<span>  main <span class="op">=</span> <span class="st">"Histogram of Samples from Truncated Multi-Modal Distribution"</span>,</span>
<span>  xlab <span class="op">=</span> <span class="st">"Value"</span>,</span>
<span>  col <span class="op">=</span> <span class="st">"lightgreen"</span>,</span>
<span>  border <span class="op">=</span> <span class="st">"white"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="stors_package_files/figure-html/unnamed-chunk-16-2.png" width="700"></p>
</div>
<div class="section level2">
<h2 id="saving-loading-and-deleting-users-proposals">Saving, Loading and Deleting Users’ Proposals<a class="anchor" aria-label="anchor" href="#saving-loading-and-deleting-users-proposals"></a>
</h2>
<p>The proposal stored in <code>bi_proposal</code> will not be preserved
across sessions. Therefore, if the user is satisfied with the sampling
results and wishes to store the proposal for future use, they should
save the proposal using the <code><a href="../reference/save_proposal.html">save_proposal()</a></code> function. This
function takes the optimized proposal and a filename chosen by the user
to save the proposal in the internal R data directory on their machine.
This is recommended if the user plans to use the proposal frequently
across sessions, to avoid re-optimizing the proposal in future
sessions.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="../reference/save_proposal.html">save_proposal</a></span><span class="op">(</span><span class="va">bi_proposal</span>, <span class="st">"bimodal_proposal"</span><span class="op">)</span></span></code></pre></div>
<p>To load and use the proposal in future sessions, the user only needs
to use the <code><a href="../reference/load_proposal.html">load_proposal()</a></code> function.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">bi_proposal</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/load_proposal.html">load_proposal</a></span><span class="op">(</span><span class="st">"bimodal_proposal"</span><span class="op">)</span></span></code></pre></div>
<p>In case the user wants to view a list of all previously stored
proposals, the <code><a href="../reference/print_proposals.html">print_proposals()</a></code> function will provide the
user with all stored proposals.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="../reference/print_proposals.html">print_proposals</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Proposals Data</span> <span style="color: #00BBBB;">──────────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; Name                 | Size (KB)       | Date</span></span>
<span><span class="co">#&gt; -----------------------------------------------</span></span>
<span><span class="co">#&gt; bimodal_proposal_1   | 124.98          | 2025-03-02 20:03:26</span></span>
<span><span class="co">#&gt; bimodal_proposal_2   | 124.98          | 2025-03-02 20:03:26</span></span>
<span><span class="co">#&gt; bimodal_proposal_3   | 124.98          | 2025-03-02 20:03:26</span></span>
<span><span class="co">#&gt; bimodal_proposal     | 124.98          | 2025-03-02 20:03:25</span></span>
<span><span class="co">#&gt; bimodal              | 26.88           | 2025-03-02 20:02:37</span></span>
<span><span class="co">#&gt; normal               | 23.05           | 2025-03-02 20:02:37</span></span>
<span><span class="co">#&gt; -----------------------------------------------</span></span>
<span><span class="co">#&gt; Total Size: 549.85</span></span></code></pre></div>
<p>Be aware that the saved proposal can be quite large in size,
depending on the user’s system. Therefore, if the user wants to delete a
proposal, the <code><a href="../reference/delete_proposal.html">delete_proposal()</a></code> function can be used by
providing the proposal’s name.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="../reference/delete_proposal.html">delete_proposal</a></span><span class="op">(</span><span class="st">"bimodal_proposal"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">"bimodal_proposal.rds"</span> proposal deleted successfully</span></span>
<span></span>
<span><span class="fu"><a href="../reference/print_proposals.html">print_proposals</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Proposals Data</span> <span style="color: #00BBBB;">──────────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; Name                 | Size (KB)       | Date</span></span>
<span><span class="co">#&gt; -----------------------------------------------</span></span>
<span><span class="co">#&gt; bimodal_proposal_1   | 124.98          | 2025-03-02 20:03:26</span></span>
<span><span class="co">#&gt; bimodal_proposal_2   | 124.98          | 2025-03-02 20:03:26</span></span>
<span><span class="co">#&gt; bimodal_proposal_3   | 124.98          | 2025-03-02 20:03:26</span></span>
<span><span class="co">#&gt; bimodal              | 26.88           | 2025-03-02 20:02:37</span></span>
<span><span class="co">#&gt; normal               | 23.05           | 2025-03-02 20:02:37</span></span>
<span><span class="co">#&gt; -----------------------------------------------</span></span>
<span><span class="co">#&gt; Total Size: 424.87</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Ahmad ALQabandi, Louis Aslett.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
